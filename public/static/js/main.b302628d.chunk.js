(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),c=n(7),a=n.n(c),r=(n(13),n(5)),l=n(4),s=n(1);n(14);function u(e){return o.a.createElement("li",{className:"todo__item"},o.a.createElement("input",{type:"checkbox",name:"check",id:"",checked:!0,disabled:!0}),e.item.title)}function d(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)(e.item.isDone),l=Object(s.a)(r,2),u=l[0],d=l[1],m=Object(i.useState)(""),h=Object(s.a)(m,2),f=h[0],b=h[1],p=Object(i.useRef)();return o.a.createElement("li",{className:"todo__item"},o.a.createElement("input",{type:"checkbox",name:"check",id:"",checked:u,onChange:function(){d(!u),e.handleCheck(e.item,e.index)},disabled:!!e.isWorking}),c&&o.a.createElement("input",{type:"text",value:f,onChange:function(e){return b(e.target.value)},ref:p}),!c&&e.item.title,o.a.createElement("div",{className:"action"},o.a.createElement("button",{onClick:function(){c?(a(!c),e.handleEdit(e.item,f,e.index)):(a(!c),b(e.item.title),e.setWorking(!0))},disabled:!(!e.isWorking||c)},c?"Xong":"S\u1eeda"),o.a.createElement("button",{onClick:function(){return e.handleDetele(e.item._id)},disabled:!!e.isWorking},"X\xf3a")," "))}var m=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)([]),m=Object(s.a)(a,2),h=m[0],f=m[1],b=Object(i.useState)(!1),p=Object(s.a)(b,2),g=p[0],O=p[1],j=Object(i.useState)(""),E=Object(s.a)(j,2),y=E[0],k=E[1],v=Object(i.useState)(),_=Object(s.a)(v,2),S=_[0],D=_[1],x=Object(i.useState)(),C=Object(s.a)(x,2),N=C[0],T=C[1],w=Object(i.useState)(!1),W=Object(s.a)(w,2),J=W[0],A=W[1],P=Object(i.useRef)();Object(i.useEffect)((function(){fetch("/api/todo").then((function(e){return 200===e.status?e.json():e.text()})).then((function(e){return"string"===typeof e?T(e):c(e)})).catch((function(e){return console.log(e)})),fetch("/api/todo?done=true").then((function(e){return 200===e.status?e.json():e.text()})).then((function(e){return"string"===typeof e?T(e):f(e)})).catch((function(e){return console.log(e)}))}),[]);var B=function(e){A(!0),fetch("/api/todo",{method:"DELETE",body:JSON.stringify({id:e}),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(t){200===t.status?c(n.filter((function(t){return t._id!==e}))):T(!0),A(!1)})).catch((function(e){console.log(e),A(!1)}))},X=function(e){A(!0),fetch("/api/todo",{method:"PUT",body:JSON.stringify({id:e._id,title:e.title,isDone:!e.isDone}),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(t){200===t.status?(c(n.filter((function(t){return t._id!==e._id}))),f([Object(r.a)(Object(r.a)({},e),{},{timeDone:Date.now()})].concat(Object(l.a)(h))),T(),A(!1)):(T("\xdai l\u1ed7i r\u1ed3i!"),A(!1))}))},R=function(e,t,i){fetch("/api/todo",{method:"PUT",body:JSON.stringify({id:e._id,title:t,isDone:e.isDone}),headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status){var o=Object(l.a)(n);o[i].title=t,c(o),T(),A(!1)}else T("\xdai l\u1ed7i r\u1ed3i!"),A(!1)}))};return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"TODO App"),N&&o.a.createElement("p",{className:"error"},"\xdai, l\u1ed7i r\u1ed3i!"),o.a.createElement("form",{action:"",method:"POST",className:"todo__form",onSubmit:function(e){return function(e){e.preventDefault(),y.trim().length?(A(!0),fetch("/api/todo",{method:"POST",body:JSON.stringify({title:y}),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return 200===e.status?e.json():e.text})).then((function(e){"string"!==typeof e?(c([{_id:e._id,time:e.time,title:e.title,isDone:e.isDone}].concat(Object(l.a)(n))),k(""),D(),T(),A(!1)):T(e)})).catch((function(e){console.log(e),A(!1)}))):D("Nh\u1eadp c\xf4ng vi\u1ec7c tr\u01b0\u1edbc b\u1ea1n ei!")}(e)}},o.a.createElement("input",{type:"text",name:"title",id:"",value:y,onChange:function(e){return k(e.target.value)},ref:P,placeholder:"C\xf4ng vi\u1ec7c h\xf4m nay c\u1ee7a b\u1ea1n l\xe0 g\xec?",disabled:!!J})),o.a.createElement("ul",{className:"todo__list"},n.length>0&&n.sort((function(e,t){return t.time-e.time})).map((function(e,t){return o.a.createElement(d,{key:e._id,item:e,index:t,handleCheck:X,handleDetele:B,handleEdit:R,isWorking:J,setWorking:A})})),0===n.length&&o.a.createElement("li",{style:{textAlign:"center"},onClick:function(){return P.current.focus()}},S||"Th\xeam m\u1ed9t c\xf4ng vi\u1ec7c \u0111\u1ec3 b\u1eaft \u0111\u1ea7u n\xe0o!")),o.a.createElement("ul",{className:"todo__list--done"},o.a.createElement("li",{onClick:function(){return O(!g)},style:{textAlign:"center",marginBottom:"20px"}},"Xem c\xe1c m\u1ee5c \u0111\xe3 ho\xe0n th\xe0nh"),g&&h.length>0&&h.sort((function(e,t){return t.timeDone-e.timeDone})).map((function(e){return[o.a.createElement(u,{key:e._id,item:e})]})),g&&0===h.length&&o.a.createElement("li",{style:{textAlign:"center",color:"#999999"}},"Ch\u01b0a ho\xe0n th\xe0nh c\xf4ng vi\u1ec7c n\xe0o!")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(m,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.b302628d.chunk.js.map